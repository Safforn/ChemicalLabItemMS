<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="renderer" content="webkit">

  <title>采购入库</title>
  <meta name="keywords" >
  <meta name="description">

  <link href="css/bootstrap.min.css?v=3.4.0" rel="stylesheet">
  <link href="font-awesome/css/font-awesome.css?v=4.3.0" rel="stylesheet">
  <link href="css/plugins/iCheck/custom.css" rel="stylesheet">
  <link href="css/animate.css" rel="stylesheet">
  <link href="css/style.css?v=2.2.0" rel="stylesheet">
</head>
<body>
<div id="wrapper">
  <!-- 侧边栏 -->
  <div id="left_sidebar"></div>
  <div id="page-wrapper" class="gray-bg dashbard-1">

    <!--头部-->
    <div id="header"></div>
    <!--标题-->
    <div class="row wrapper border-bottom white-bg page-heading">
      <div class="col-lg-10">
        <h2>采购入库</h2>

      </div>
      <div class="col-lg-2">

      </div>
    </div>
    <!--表单本体-->
    <div class="wrapper wrapper-content animated fadeInRight">
      <div class="row">
        <div class="col-lg-12">
          <div class="ibox float-e-margins">
            <div class="ibox-title">
              <h5>采购申请表</h5>
              <div class="ibox-tools">
                <a class="collapse-link">
                  <i class="fa fa-chevron-up"></i>
                </a>
              </div>
            </div>
            <div class="ibox-content">
              <form method="get" class="form-horizontal">

                <div class="row">
                  <div class="col-lg-12">
                    <div class="ibox float-e-margins">

                      <div class="ibox-content">

                        <table id="table" class="datatable table table-striped table-bordered table-hover">

                        </table>

                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </div>


          </div>
        </div>
      </div>
    </div>

    <!-- 数据表单弹窗 -->
    <form method="post" class="form-horizontal" role="form" id="updateGoodsForm">
      <div class="modal fade" id="updateModal" tabindex="-1" role="dialog" aria-labelledby="updateModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="width: 1400px">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                ×
              </button>
              <h4 class="modal-title" id="updateModalLabel">
                物品清单
              </h4>
            </div>

            <div class="form-group">
              <div class="row">
                <div class="col-lg-12">
                  <div class="ibox float-e-margins">
                    <div class="ibox-content">


                      <form method="get" class="form-horizontal">
                        <div class="form-group">
                          <label class="col-sm-2 control-label">选择仓库</label>

                          <div class="col-sm-10">
                            <select class="form-control m-b" name="account">
                              <option>仓库 1</option>
                              <option>仓库 2</option>
                              <option>仓库 3</option>
                              <option>仓库 4</option>
                            </select>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="col-sm-2 control-label">备注</label>
                          <div class="col-sm-10">
                            <textarea class="form-control input-lg m-b" name="saysths" rows="5" cols="30" wrap="soft" style="resize:none;">备注</textarea>
                          </div>
                        </div>
                        <div class="form-group">
                          <div class="row">
                            <div class="col-lg-12">
                              <div class="ibox float-e-margins">
                                <div class="ibox-title">
                                  <h5>入库物品清单</h5>
                                  <div class="ibox-tools">
                                    <a class="collapse-link">
                                      <i class="fa fa-chevron-up"></i>
                                    </a>
                                  </div>
                                </div>
                                <div class="ibox-content">

                                  <table id="listTable" width="100%" class="table table-striped table-bordered table-hover dataTables-example">

                                  </table>

                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="form-group">
                          <div class="col-sm-4 col-sm-offset-2">
                            <button id="submit-btn" class=" btn btn-primary" type="submit" onclick="purchase_submit()">入库</button>
                          </div>
                        </div>
                      </form>

                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!--   end modal-body  -->

        </div><!-- /.modal-content -->
      </div><!-- /.modal -->

    </form>



  </div>
</div>

<!-- Mainly scripts -->
<script src="js/jquery-2.1.1.min.js"></script>
<script src="js/bootstrap.min.js?v=3.4.0"></script>
<script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

<!-- Custom and plugin javascript -->
<script src="js/hplus.js?v=2.2.0"></script>
<script src="js/plugins/pace/pace.min.js"></script>

<!-- iCheck -->
<script src="js/plugins/iCheck/icheck.min.js"></script>

<!--&lt;!&ndash;引入JavaScript&ndash;&gt;-->
<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>


<!-- Data Tables -->
<script src="js/plugins/dataTables/jquery.dataTables.js"></script>
<script src="js/plugins/dataTables/dataTables.bootstrap.js"></script>

<!--&lt;!&ndash;引入css&ndash;&gt;-->
<!--<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css">-->

<!--&lt;!&ndash;&lt;!&ndash;引入JavaScript&ndash;&gt;&ndash;&gt;-->
<!--<script type="text/javascript" language="javascript" src="//code.jquery.com/jquery-1.12.4.js"></script>-->
<!--<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>-->

<!-- Page-Level Scripts -->


<!--初始化代码-->
<!-- 导入header -->
<script>
  $(function () {
    $.get("header.html",function (data) {
      $("#header").html(data);
    });
  });
</script>

<!-- 导入left_sidebar -->
<script>
  $(function () {
    $.get("left_sidebar.html",function (data) {
      $("#left_sidebar").html(data);
    });
  });
</script>

<script>
  const dataSet = [
    ['id', 'aaa', 'bb', '30', 'xxxx-xx', 'aaa', 'bb',  'xxxx-xx','1'],
    ['id1', 'aaa1', 'cc', '20', 'xxxx-xx', 'aaa', 'bb',  'xxxx-xx','2'],
    ['id2', 'aaa', 'bb', '30', 'xxxx-xx', 'aaa', 'bb',  'xxxx-xx','3'],
    ['id3', 'aaa1', 'cc', '20', 'xxxx-xx', 'aaa', 'bb',  'xxxx-xx','0'],
    ['id4', 'aaa', 'bb', '30', 'xxxx-xx', 'aaa', 'bb',  'xxxx-xx','1'],
    ['id5', 'aaa1', 'cc', '20', 'xxxx-xx', 'aaa', 'bb',  'xxxx-xx','2'],
    ['id6', 'aaa', 'bb', '30', 'xxxx-xx', 'aaa', 'bb',  'xxxx-xx','3'],
    ['id7', 'aaa1', 'cc', '20', 'xxxx-xx','aaa', 'bb',  'xxxx-xx', '0'],
    ['id8', 'aaa', 'bb', '30', 'xxxx-xx', 'aaa', 'bb', 'xxxx-xx','3'],
    ['id9', 'aaa1', 'cc', '20', 'xxxx-xx', 'aaa', 'bb',  'xxxx-xx','2'],
  ];
  const dataSets = [
    ['aaa', '规格', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu'],
    ['aaa1', '规格1', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu'],
    ['aaa2', '规格', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu'],
    ['aaa3', '规格1', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu'],
    ['aaa4', '规格', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu'],
    ['aaa5', '规格1', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu'],
    ['aaa6', '规格', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu'],
    ['aaa7', '规格1', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu'],
    ['aaa8', '规格', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu'],
    ['aaa9', '规格1', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu'],
    ['aaa10', '规格', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu'],
    ['aaa11', '规格1', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu'],
    ['aaa12', '规格', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu'],
    ['aaa13', '规格1', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu'],
    ['aaa14', '规格', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu'],
    ['aaa15', '规格1', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu'],
  ];
  $(document).ready(function() {
    $(function(){
      var table = $('#table').DataTable({
        retrieve: true,
        data:dataSet,
        columns:[
          {
            'field': "purchase_requisition_id",
            'title': '采购申请表编号',
            'defaultContent' : ""
          }, {
            'field': "purchase_order_id",
            'title': '采购物品清单编号',
            'defaultContent' : ""
          }, {
            'field': "requisition_user_id",
            'title': '申请人',
            'defaultContent' : ""
          },  {
            'field': "requisition_date",
            'title': '申请提交日期',
            'defaultContent' : ""
          }, {
            'field': "state",
            'title': '申请表当前状态',
            'defaultContent' : "0"
          },  {
            field: "operate",
            sTitle: '操作',
            sDefaultContent :
                    "<button class='list-btn btn btn-primary btn-xs' type='button' style='margin-left: 10px'>入库</button>",
            sClass: 'text-center',
            "data" : null,
            // "render" : function(data, type,row) {
            //     var id = '"' + row.id + '"';
            //     var html = "<a href='javascript:void(0);'  class='btn btn-primary btn-xs'  onclick='EditViewById()'></i>物品清单</a>"
            //     return html;
            //     // formatter: actionFormatter
            // }
          }],
        "language": {
          "sProcessing": "处理中...",
          "sLengthMenu": "显示 _MENU_ 项结果",
          "sZeroRecords": "没有匹配结果",
          "sInfo": "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
          "sInfoEmpty": "显示第 0 至 0 项结果，共 0 项",
          "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
          "sInfoPostFix": "",
          "sSearch": "搜索:",
          "sUrl": "",
          "sEmptyTable": "表中数据为空",
          "sLoadingRecords": "载入中...",
          "sInfoThousands": ",",
          "oPaginate": {
            "sFirst": "首页",
            "sPrevious": "上页",
            "sNext": "下页",
            "sLast": "末页"
          },
          "oAria": {
            "sSortAscending": ": 以升序排列此列",
            "sSortDescending": ": 以降序排列此列"
          }
        }
      });

      var listtable = $('#listTable').DataTable({
        retrieve: true,
        data:dataSets,
        columns:[
          {
            'field': "name",
            'title': '物品名称',
            'defaultContent' : "",
            'sClass': 'text-center'
          }, {
            'field': "specification",
            'title': '规格',
            'defaultContent' : "",
            'sClass': 'text-center'
          }, {
            'field': "quantity",
            'title': '数量',
            'defaultContent' : "",
            'sClass': 'text-center'
          }, {
            'field': "unit",
            'title': '包装单位',
            'defaultContent' : "",
            'sClass': 'text-center'
          }, {
            'field': "classification",
            'title': '分类',
            'defaultContent' : "",
            'sClass': 'text-center'
          }, {
            'field': "price",
            'title': '单价',
            'defaultContent' : "",
            'sClass': 'text-center'
          }, {
            'field': "expiration_time",
            'title': '过期时间',
            'defaultContent' : "",
            'sClass': 'text-center'
          }, {
            'field': "upper_limit",
            'title': '警戒上限',
            // width:90,
            'defaultContent' : "",
            'sClass': 'text-center'
          }, {
            'field': "lower_limit",
            'title': '警戒下限',
            // width:90,
            'defaultContent' : "",
            'sClass': 'text-center'
          }, {
            'field': "warehouse_id",
            'title': '仓库',
            'defaultContent' : "",
            'sClass': 'text-center'
          }, {
            'field': "notes",
            'title': '备注',
            'defaultContent' : "",
            'sClass': 'text-center'
          }],
        "language": {
          "sProcessing": "处理中...",
          "sLengthMenu": "显示 _MENU_ 项结果",
          "sZeroRecords": "没有匹配结果",
          "sInfo": "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
          "sInfoEmpty": "显示第 0 至 0 项结果，共 0 项",
          "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
          "sInfoPostFix": "",
          "sSearch": "搜索:",
          "sUrl": "",
          "sEmptyTable": "表中数据为空",
          "sLoadingRecords": "载入中...",
          "sInfoThousands": ",",
          "oPaginate": {
            "sFirst": "首页",
            "sPrevious": "上页",
            "sNext": "下页",
            "sLast": "末页"
          },
          "oAria": {
            "sSortAscending": ": 以升序排列此列",
            "sSortDescending": ": 以降序排列此列"
          }
        }
      });

      //点击物品清单
      $("table tbody").on("click",".list-btn",function (){

        $('#updateModal').modal('show');
      })


    });

  } );

  //点击入库按钮
function purchase_submit(){
  if(confirm('确认入库？')){
    //点击确认

  }else{
    //点击取消

  }
}

</script>


</body>
</html>