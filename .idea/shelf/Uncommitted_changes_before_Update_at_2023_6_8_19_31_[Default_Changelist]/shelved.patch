Index: src/main/resources/druid.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>driverClassName=com.mysql.cj.jdbc.Driver\r\nurl=jdbc:mysql://127.0.0.1/chemical_lab_item_ms?serverTimezone=UTC\r\nusername=root\r\npassword=123456\r\ninitialSize=5\r\nmaxActive=10\r\nmaxWait=3000\r\n#filters=stat\r\n#timeBetweenEvictionRunsMillis=60000\r\n#minEvictableIdleTimeMillis=300000\r\n#validationQuery=SELECT 1\r\n#testWhileIdle=true\r\n#testOnBorrow=false\r\n#testOnReturn=false\r\n#poolPreparedStatements=false\r\n#maxPoolPreparedStatementPerConnectionSize=200\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>ISO-8859-1
===================================================================
diff --git a/src/main/resources/druid.properties b/src/main/resources/druid.properties
--- a/src/main/resources/druid.properties	(revision 31c0b7b559e6e7b053a2a71f3130a129a6495235)
+++ b/src/main/resources/druid.properties	(date 1686185453906)
@@ -1,7 +1,7 @@
 driverClassName=com.mysql.cj.jdbc.Driver
 url=jdbc:mysql://127.0.0.1/chemical_lab_item_ms?serverTimezone=UTC
 username=root
-password=123456
+password=20020107mysql
 initialSize=5
 maxActive=10
 maxWait=3000
Index: src/main/webapp/left_sidebar.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>    <!-- 左侧边栏 -->\r\n    <nav class=\"navbar-default navbar-static-side\" role=\"navigation\">\r\n        <div class=\"sidebar-collapse\">\r\n            <ul class=\"nav\" id=\"side-menu\">\r\n                <li class=\"nav-header\">\r\n\r\n                    <div class=\"dropdown profile-element\">\r\n                        <!-- 头像 <span> <img alt=\"image\" class=\"img-circle\" src=\"img/profile_small.jpg\" /> </span>-->\r\n                        <a data-toggle=\"dropdown\" class=\"dropdown-toggle\" href=\"index.html#\">\r\n                            <span class=\"clear\">\r\n                                <span id=\"span_user_id\" class=\"block m-t-xs\">\r\n                                    <strong class=\"font-bold\">用户id</strong>\r\n                                </span>\r\n                                <span id=\"span_username\" class=\"text-muted text-xs block\">\r\n                                    <b class=\"caret\">用户身份</b>\r\n                                </span>\r\n                            </span>\r\n                        </a>\r\n                        <!--登陆位置的下拉栏-->\r\n                        <ul class=\"dropdown-menu animated fadeInRight m-t-xs\">\r\n                            <li>\r\n                                <a href=\"login.html\">安全退出</a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <div class=\"logo-element\">\r\n                        666\r\n                    </div>\r\n\r\n                </li>\r\n                <li class=\"active\">\r\n                    <a href=\"index.html\"><i class=\"fa fa-th-large\"></i> <span class=\"nav-label\">主页</span></a>\r\n                </li>\r\n                <li>\r\n                    <a href=\"index.html#\"><i class=\"fa fa-edit\"></i> <span class=\"nav-label\">表单</span><span class=\"fa arrow\"></span></a>\r\n                    <ul class=\"nav nav-second-level\">\r\n                        <li><a id=\"form_purchase\" href=\"form_purchase.html\" style=\"display: none;\">\r\n                            采购申请表</a></li>\r\n                        <li><a id=\"form_use_or_borrow\"          href=\"form_use_or_borrow.html\">\r\n                            领用/借用申请表</a></li>\r\n                        <li><a id=\"form_waste\"                  href=\"form_waste.html\">\r\n                            废弃物品申请表</a></li>\r\n                        <li><a id=\"form_purchase_in_warehouse\"  href=\"form_purchase_in_warehouse.html\" style=\"display: none;\">\r\n                            采购入库表</a></li>\r\n                        <li><a id=\"form_borrow_in_warehouse\"    href=\"form_borrow_in_warehouse.html\" style=\"display: none;\">\r\n                            借用归还入库表</a></li>\r\n                        <li><a id=\"form_other_in_warehouse\"     href=\"form_other_in_warehouse.html\" style=\"display: none;\">\r\n                            其他入库表</a></li>\r\n                        <li><a id=\"form_ex_warehouse\"           href=\"form_ex_warehouse.html\" style=\"display: none;\">\r\n                            出库表</a></li>\r\n                        <li><a id=\"view_in_warehouse.html\" href=\"view_in_warehouse_old.html\" style=\"display: none;\">\r\n                            查看入库表</a></li>\r\n                        <li><a id=\"view_ex_warehouse\" href=\"view_ex_warehouse_old.html\" style=\"display: none;\">\r\n                            查看出库表</a></li>\r\n                    </ul>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </nav>\r\n\r\n    <script>\r\n        $.get(\"user/findOne\", {}, function (data) {\r\n            $(\"#span_username\").html(data.name)\r\n            $(\"#span_user_id\").html(data.account)\r\n        })\r\n    </script>\r\n    <script>\r\n        $.get(\"user/findIdentity\", {}, function (data) {\r\n            switch (data.identity){\r\n                //1:实验室负责人\r\n                case 1:\r\n                    $(\"#form_purchase\").css(\"display\",\"\");\r\n                    $(\"#form_use_or_borrow\").css(\"display\",\"none\");\r\n                    $(\"#form_waste\").css(\"display\",\"none\");\r\n                    break;\r\n                //2:仓库管理员\r\n                case 2:\r\n                    $(\"#form_borrow_in_warehouse\").css(\"display\",\"\");\r\n                    $(\"#form_ex_warehouse\").css(\"display\",\"\");\r\n                    $(\"#form_other_in_warehouse\").css(\"display\",\"\");\r\n                    $(\"#form_purchase_in_warehouse\").css(\"display\",\"\");\r\n                    $(\"#view_ex_warehouse\").css(\"display\",\"\");\r\n                    $(\"#view_in_warehouse\").css(\"display\",\"\");\r\n                    $(\"#form_use_or_borrow\").css(\"display\",\"none\");\r\n                    $(\"#form_waste\").css(\"display\",\"none\");\r\n                    break;\r\n                //3:审批人员\r\n                case 3:\r\n                    $(\"#form_purchase\").css(\"display\",\"\");\r\n                    break;\r\n            }\r\n        })\r\n    </script>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/left_sidebar.html b/src/main/webapp/left_sidebar.html
--- a/src/main/webapp/left_sidebar.html	(revision 31c0b7b559e6e7b053a2a71f3130a129a6495235)
+++ b/src/main/webapp/left_sidebar.html	(date 1686185338725)
@@ -12,7 +12,7 @@
                                     <strong class="font-bold">用户id</strong>
                                 </span>
                                 <span id="span_username" class="text-muted text-xs block">
-                                    <b class="caret">用户身份</b>
+                                    用户身份<b class="caret"></b>
                                 </span>
                             </span>
                         </a>
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ArtifactsWorkspaceSettings\">\r\n    <artifacts-to-build>\r\n      <artifact name=\"travel:war\" />\r\n    </artifacts-to-build>\r\n  </component>\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"4a6ee96f-f4a8-4e70-87f3-f76f4265a3ec\" name=\"Default Changelist\" comment=\"修正了DateTime时区的问题，前端可以获取当前用户登录信息\">\r\n      <change afterPath=\"$PROJECT_DIR$/src/main/webapp/view_ex_warehouse_old.html\" afterDir=\"false\" />\r\n      <change afterPath=\"$PROJECT_DIR$/src/main/webapp/view_in_warehouse_old.html\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/webContexts.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/webContexts.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/ChemicalLabItemMS.iml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/ChemicalLabItemMS.iml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/java/web/servlet/PurchaseServlet.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/java/web/servlet/PurchaseServlet.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/java/web/servlet/UserServlet.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/java/web/servlet/UserServlet.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/resources/druid.properties\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/resources/druid.properties\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/webapp/form_borrow_in_warehouse.html\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/webapp/form_borrow_in_warehouse.html\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/webapp/form_ex_warehouse.html\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/webapp/form_ex_warehouse.html\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/webapp/form_other_in_warehouse.html\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/webapp/form_other_in_warehouse.html\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/webapp/form_purchase.html\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/webapp/form_purchase.html\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/webapp/form_purchase_new.html\" beforeDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/webapp/form_use_or_borrow.html\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/webapp/form_use_or_borrow.html\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/webapp/form_waste.html\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/webapp/form_waste.html\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/webapp/left_sidebar.html\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/webapp/left_sidebar.html\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/webapp/test_center_form.html\" beforeDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/webapp/view_ex_warehouse.html\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/webapp/view_ex_warehouse.html\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/webapp/view_in_warehouse.html\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/webapp/view_in_warehouse.html\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"Interface\" />\r\n        <option value=\"Class\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\r\n      <map>\r\n        <entry key=\"$PROJECT_DIR$\" value=\"master\" />\r\n      </map>\r\n    </option>\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"GitSEFilterConfiguration\">\r\n    <file-type-list>\r\n      <filtered-out-file-type name=\"LOCAL_BRANCH\" />\r\n      <filtered-out-file-type name=\"REMOTE_BRANCH\" />\r\n      <filtered-out-file-type name=\"TAG\" />\r\n      <filtered-out-file-type name=\"COMMIT_BY_MESSAGE\" />\r\n    </file-type-list>\r\n  </component>\r\n  <component name=\"LogFilters\">\r\n    <option name=\"FILTER_ERRORS\" value=\"false\" />\r\n    <option name=\"FILTER_WARNINGS\" value=\"false\" />\r\n    <option name=\"FILTER_INFO\" value=\"true\" />\r\n    <option name=\"FILTER_DEBUG\" value=\"true\" />\r\n    <option name=\"CUSTOM_FILTER\" />\r\n  </component>\r\n  <component name=\"MarkdownSettingsMigration\">\r\n    <option name=\"stateVersion\" value=\"1\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"2Avt6bIjEb9LPH0DVMOFNxUmr9z\" />\r\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\">\r\n    <ConfirmationsSetting value=\"2\" id=\"Add\" />\r\n  </component>\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">\r\n    <property name=\"ASKED_ADD_EXTERNAL_FILES\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.ShowReadmeOnStart\" value=\"true\" />\r\n    <property name=\"SHARE_PROJECT_CONFIGURATION_FILES\" value=\"true\" />\r\n    <property name=\"WebServerToolWindowFactoryState\" value=\"false\" />\r\n    <property name=\"aspect.path.notification.shown\" value=\"true\" />\r\n    <property name=\"last_opened_file_path\" value=\"$PROJECT_DIR$/src/main/webapp\" />\r\n    <property name=\"node.js.detected.package.eslint\" value=\"true\" />\r\n    <property name=\"node.js.path.for.package.eslint\" value=\"project\" />\r\n    <property name=\"node.js.path.for.package.tslint\" value=\"project\" />\r\n    <property name=\"node.js.selected.package.eslint\" value=\"(autodetect)\" />\r\n    <property name=\"node.js.selected.package.tslint\" value=\"(autodetect)\" />\r\n    <property name=\"nodejs_package_manager_path\" value=\"npm\" />\r\n    <property name=\"project.structure.last.edited\" value=\"Modules\" />\r\n    <property name=\"project.structure.proportion\" value=\"0.17\" />\r\n    <property name=\"project.structure.side.proportion\" value=\"0.26412776\" />\r\n    <property name=\"settings.editor.selected.configurable\" value=\"MavenSettings\" />\r\n  </component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"CopyFile.RECENT_KEYS\">\r\n      <recent name=\"D:\\develop\\Java\\ChemicalLabItemMS\\src\\main\\webapp\" />\r\n      <recent name=\"D:\\develop\\Java\\ChemicalLabItemMS\\src\\main\\webapp\\front-end-res-lib\" />\r\n      <recent name=\"D:\\develop\\Java\\ChemicalLabItemMS\\src\\main\\java\\service\\temp_service\" />\r\n    </key>\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"D:\\develop\\Java\\ChemicalLabItemMS\\src\\main\\webapp\\html_temp\" />\r\n    </key>\r\n    <key name=\"MoveClassesOrPackagesDialog.RECENTS_KEY\">\r\n      <recent name=\"\" />\r\n    </key>\r\n    <key name=\"CopyClassDialog.RECENTS_KEY\">\r\n      <recent name=\"web\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunManager\" selected=\"Maven.ChemicalLabItemMS\">\r\n    <configuration default=\"true\" type=\"ArquillianJUnit\" factoryName=\"\" nameIsGenerated=\"true\">\r\n      <option name=\"arquillianRunConfiguration\">\r\n        <value>\r\n          <option name=\"containerStateName\" value=\"\" />\r\n        </value>\r\n      </option>\r\n      <option name=\"TEST_OBJECT\" value=\"class\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"ChemicalLabItemMS\" type=\"MavenRunConfiguration\" factoryName=\"Maven\">\r\n      <MavenSettings>\r\n        <option name=\"myGeneralSettings\" />\r\n        <option name=\"myRunnerSettings\" />\r\n        <option name=\"myRunnerParameters\">\r\n          <MavenRunnerParameters>\r\n            <option name=\"profiles\">\r\n              <set />\r\n            </option>\r\n            <option name=\"goals\">\r\n              <list>\r\n                <option value=\"tomcat7:run\" />\r\n              </list>\r\n            </option>\r\n            <option name=\"pomFileName\" />\r\n            <option name=\"profilesMap\">\r\n              <map />\r\n            </option>\r\n            <option name=\"resolveToWorkspace\" value=\"false\" />\r\n            <option name=\"workingDirPath\" value=\"$PROJECT_DIR$\" />\r\n          </MavenRunnerParameters>\r\n        </option>\r\n      </MavenSettings>\r\n      <method v=\"2\" />\r\n    </configuration>\r\n    <configuration name=\"Tomcat 8.5.24\" type=\"#com.intellij.j2ee.web.tomcat.TomcatRunConfigurationFactory\" factoryName=\"Local\" APPLICATION_SERVER_NAME=\"Tomcat 8.5.24\" ALTERNATIVE_JRE_ENABLED=\"false\" nameIsGenerated=\"true\">\r\n      <option name=\"UPDATING_POLICY\" value=\"restart-server\" />\r\n      <deployment>\r\n        <artifact name=\"travel:war\">\r\n          <settings>\r\n            <option name=\"CONTEXT_PATH\" value=\"/travel_war\" />\r\n          </settings>\r\n        </artifact>\r\n        <artifact name=\"ChemicalLabItemMS:war\">\r\n          <settings>\r\n            <option name=\"CONTEXT_PATH\" value=\"/ChemicalLabItemMS_war\" />\r\n          </settings>\r\n        </artifact>\r\n      </deployment>\r\n      <server-settings>\r\n        <option name=\"BASE_DIRECTORY_NAME\" value=\"0049ada1-20ae-4acc-ba0a-1e64ffc4502d\" />\r\n      </server-settings>\r\n      <predefined_log_file enabled=\"true\" id=\"Tomcat\" />\r\n      <predefined_log_file enabled=\"true\" id=\"Tomcat Catalina\" />\r\n      <predefined_log_file id=\"Tomcat Manager\" />\r\n      <predefined_log_file id=\"Tomcat Host Manager\" />\r\n      <predefined_log_file id=\"Tomcat Localhost Access\" />\r\n      <RunnerSettings RunnerId=\"Debug\">\r\n        <option name=\"DEBUG_PORT\" value=\"1237\" />\r\n      </RunnerSettings>\r\n      <ConfigurationWrapper VM_VAR=\"JAVA_OPTS\" RunnerId=\"Cover\">\r\n        <option name=\"USE_ENV_VARIABLES\" value=\"true\" />\r\n        <STARTUP>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </STARTUP>\r\n        <SHUTDOWN>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </SHUTDOWN>\r\n      </ConfigurationWrapper>\r\n      <ConfigurationWrapper VM_VAR=\"JAVA_OPTS\" RunnerId=\"Debug\">\r\n        <option name=\"USE_ENV_VARIABLES\" value=\"true\" />\r\n        <STARTUP>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </STARTUP>\r\n        <SHUTDOWN>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </SHUTDOWN>\r\n      </ConfigurationWrapper>\r\n      <ConfigurationWrapper VM_VAR=\"JAVA_OPTS\" RunnerId=\"Profile\">\r\n        <option name=\"USE_ENV_VARIABLES\" value=\"true\" />\r\n        <STARTUP>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </STARTUP>\r\n        <SHUTDOWN>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </SHUTDOWN>\r\n      </ConfigurationWrapper>\r\n      <ConfigurationWrapper VM_VAR=\"JAVA_OPTS\" RunnerId=\"Run\">\r\n        <option name=\"USE_ENV_VARIABLES\" value=\"true\" />\r\n        <STARTUP>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </STARTUP>\r\n        <SHUTDOWN>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </SHUTDOWN>\r\n      </ConfigurationWrapper>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n        <option name=\"BuildArtifacts\" enabled=\"true\">\r\n          <artifact name=\"ChemicalLabItemMS:war\" />\r\n        </option>\r\n      </method>\r\n    </configuration>\r\n    <list>\r\n      <item itemvalue=\"Maven.ChemicalLabItemMS\" />\r\n      <item itemvalue=\"Tomcat Server.Tomcat 8.5.24\" />\r\n    </list>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"SvnConfiguration\">\r\n    <configuration />\r\n  </component>\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"4a6ee96f-f4a8-4e70-87f3-f76f4265a3ec\" name=\"Default Changelist\" comment=\"\" />\r\n      <created>1655901715645</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1655901715645</updated>\r\n      <workItem from=\"1655901717854\" duration=\"450000\" />\r\n      <workItem from=\"1685427151825\" duration=\"1535000\" />\r\n      <workItem from=\"1685428706026\" duration=\"124000\" />\r\n      <workItem from=\"1685428833294\" duration=\"826000\" />\r\n      <workItem from=\"1685520782760\" duration=\"706000\" />\r\n      <workItem from=\"1685537381059\" duration=\"1334000\" />\r\n      <workItem from=\"1685540296469\" duration=\"811000\" />\r\n      <workItem from=\"1685599640376\" duration=\"132000\" />\r\n      <workItem from=\"1685599807762\" duration=\"1261000\" />\r\n      <workItem from=\"1685603422754\" duration=\"49000\" />\r\n      <workItem from=\"1685603474267\" duration=\"10000\" />\r\n      <workItem from=\"1685603485940\" duration=\"6000\" />\r\n      <workItem from=\"1685603502462\" duration=\"2399000\" />\r\n      <workItem from=\"1685674025238\" duration=\"1608000\" />\r\n      <workItem from=\"1685771307743\" duration=\"402000\" />\r\n      <workItem from=\"1685771714405\" duration=\"5544000\" />\r\n      <workItem from=\"1685777299983\" duration=\"306000\" />\r\n      <workItem from=\"1685897456684\" duration=\"1052000\" />\r\n      <workItem from=\"1685924081606\" duration=\"921000\" />\r\n      <workItem from=\"1685965736717\" duration=\"8365000\" />\r\n      <workItem from=\"1686020823650\" duration=\"2271000\" />\r\n      <workItem from=\"1686097290341\" duration=\"1965000\" />\r\n      <workItem from=\"1686103535919\" duration=\"1125000\" />\r\n      <workItem from=\"1686122288404\" duration=\"2228000\" />\r\n      <workItem from=\"1686124548099\" duration=\"13105000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"添加GoodsService及其实现，实体类Date-&gt;String\">\r\n      <created>1655902015448</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1655902015448</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"更新了实体类的注释\">\r\n      <created>1685776134712</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1685776134712</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"更新了实体类的注释\">\r\n      <created>1685777451475</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1685777451475</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"更新了领用&amp;借用申请表的校验\">\r\n      <created>1685955280415</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1685955280415</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00005\" summary=\"更新采购、领用dao层功能\">\r\n      <created>1686015910191</created>\r\n      <option name=\"number\" value=\"00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1686015910191</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00006\" summary=\"更新采购入库功能\">\r\n      <created>1686040539807</created>\r\n      <option name=\"number\" value=\"00006\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1686040539807</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"7\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n    <option name=\"oldMeFiltersMigrated\" value=\"true\" />\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <option name=\"ADD_EXTERNAL_FILES_SILENTLY\" value=\"true\" />\r\n    <MESSAGE value=\"添加GoodsService及其实现，实体类Date-&gt;String\" />\r\n    <MESSAGE value=\"更新了实体类的注释\" />\r\n    <MESSAGE value=\"更新了领用&amp;借用申请表的校验\" />\r\n    <MESSAGE value=\"更新采购、领用dao层功能\" />\r\n    <MESSAGE value=\"更新废弃物后端\" />\r\n    <MESSAGE value=\"更新 借用入库 功能\" />\r\n    <MESSAGE value=\"完善了前端申请表、入库表的页面，实现采购申请的数据部分插入\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"完善了前端申请表、入库表的页面，实现采购申请的数据部分插入\" />\r\n  </component>\r\n  <component name=\"XSLT-Support.FileAssociations.UIState\">\r\n    <expand />\r\n    <select />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 31c0b7b559e6e7b053a2a71f3130a129a6495235)
+++ b/.idea/workspace.xml	(date 1686223856718)
@@ -10,25 +10,11 @@
   </component>
   <component name="ChangeListManager">
     <list default="true" id="4a6ee96f-f4a8-4e70-87f3-f76f4265a3ec" name="Default Changelist" comment="修正了DateTime时区的问题，前端可以获取当前用户登录信息">
-      <change afterPath="$PROJECT_DIR$/src/main/webapp/view_ex_warehouse_old.html" afterDir="false" />
-      <change afterPath="$PROJECT_DIR$/src/main/webapp/view_in_warehouse_old.html" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/.idea/webContexts.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/webContexts.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_2023_6_2_21_37__Default_Changelist_.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_2023_6_2_21_37__Default_Changelist_.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/ChemicalLabItemMS.iml" beforeDir="false" afterPath="$PROJECT_DIR$/ChemicalLabItemMS.iml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/java/web/servlet/PurchaseServlet.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/web/servlet/PurchaseServlet.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/java/web/servlet/UserServlet.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/web/servlet/UserServlet.java" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/src/main/resources/druid.properties" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/resources/druid.properties" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/webapp/form_borrow_in_warehouse.html" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/form_borrow_in_warehouse.html" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/webapp/form_ex_warehouse.html" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/form_ex_warehouse.html" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/webapp/form_other_in_warehouse.html" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/form_other_in_warehouse.html" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/src/main/webapp/form_purchase.html" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/form_purchase.html" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/webapp/form_purchase_new.html" beforeDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/webapp/form_use_or_borrow.html" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/form_use_or_borrow.html" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/webapp/form_waste.html" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/form_waste.html" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/src/main/webapp/left_sidebar.html" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/left_sidebar.html" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/webapp/test_center_form.html" beforeDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/webapp/view_ex_warehouse.html" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/view_ex_warehouse.html" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/webapp/view_in_warehouse.html" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/view_in_warehouse.html" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -68,6 +54,14 @@
   </component>
   <component name="MarkdownSettingsMigration">
     <option name="stateVersion" value="1" />
+  </component>
+  <component name="MavenImportPreferences">
+    <option name="generalSettings">
+      <MavenGeneralSettings>
+        <option name="useMavenConfig" value="true" />
+        <option name="userSettingsFile" value="D:\Maven\maven3.6.3\conf\settings.xml" />
+      </MavenGeneralSettings>
+    </option>
   </component>
   <component name="ProjectId" id="2Avt6bIjEb9LPH0DVMOFNxUmr9z" />
   <component name="ProjectLevelVcsManager" settingsEditedManually="true">
@@ -281,6 +275,8 @@
       <workItem from="1686103535919" duration="1125000" />
       <workItem from="1686122288404" duration="2228000" />
       <workItem from="1686124548099" duration="13105000" />
+      <workItem from="1686223057740" duration="281000" />
+      <workItem from="1686223360551" duration="436000" />
     </task>
     <task id="LOCAL-00001" summary="添加GoodsService及其实现，实体类Date-&gt;String">
       <created>1655902015448</created>
@@ -340,7 +336,6 @@
         </entry>
       </map>
     </option>
-    <option name="oldMeFiltersMigrated" value="true" />
   </component>
   <component name="VcsManagerConfiguration">
     <option name="ADD_EXTERNAL_FILES_SILENTLY" value="true" />
Index: src/main/webapp/form_purchase.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"utf-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><meta name=\"renderer\" content=\"webkit\">\r\n\r\n    <title>基本表单</title>\r\n    <meta name=\"keywords\" >\r\n    <meta name=\"description\" >\r\n    <link href=\"css/bootstrap.min.css?v=3.4.0\" rel=\"stylesheet\">\r\n    <link href=\"font-awesome/css/font-awesome.css?v=4.3.0\" rel=\"stylesheet\">\r\n    <link href=\"css/plugins/iCheck/custom.css\" rel=\"stylesheet\">\r\n    <link href=\"css/animate.css\" rel=\"stylesheet\">\r\n    <link href=\"css/style.css?v=2.2.0\" rel=\"stylesheet\">\r\n</head>\r\n<body>\r\n<!--<button type=\"button\" id=\"batch-edit-btn\">批量编辑</button>-->\r\n<!--<button type=\"button\" id=\"batch-save-btn\">批量保存</button>-->\r\n<!--<table id=\"table\" class=\"display\" width=\"100%\"></table>-->\r\n<div id=\"wrapper\">\r\n    <!-- 侧边栏 -->\r\n    <div id=\"left_sidebar\"></div>\r\n\r\n    <div id=\"page-wrapper\" class=\"gray-bg dashbard-1\">\r\n        <!--头部-->\r\n        <div id=\"header\"></div>\r\n        <div class=\"row wrapper border-bottom white-bg page-heading\">\r\n            <div class=\"col-lg-10\">\r\n                <h2>采购申请</h2>\r\n            </div>\r\n            <div class=\"col-lg-2\"></div>\r\n        </div>\r\n        <div class=\"wrapper wrapper-content animated fadeInRight\">\r\n            <!--                所有表单元素  -->\r\n            <div class=\"row\">\r\n                <div class=\"col-lg-12\">\r\n                    <div class=\"ibox float-e-margins\">\r\n                        <div class=\"ibox-title\">\r\n                            <h5>采购申请表</h5>\r\n                            <div class=\"ibox-tools\">\r\n                                <a class=\"collapse-link\">\r\n                                    <i class=\"fa fa-chevron-up\"></i>\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"ibox-content\">\r\n                            <form method=\"get\" class=\"form-horizontal\">\r\n\r\n                                <div class=\"row\">\r\n                                    <div class=\"col-lg-12\">\r\n                                        <div class=\"ibox float-e-margins\">\r\n\r\n                                            <div class=\"ibox-content\">\r\n                                                <div class=\"\">\r\n                                                    <a onclick=\"fnClickAddRow();\" href=\"javascript:void(0);\" class=\"btn btn-primary \">新建采购申请</a>\r\n                                                    <button type=\"button\" id=\"batch-edit-btn\" class=\"btn btn-primary \">批量编辑</button>\r\n                                                    <button type=\"button\" id=\"batch-save-btn\" class=\"btn btn-primary \">批量保存</button>\r\n                                                </div>\r\n\r\n\r\n                                                <table id=\"table\" class=\"datatable table table-striped table-bordered table-hover\">\r\n\r\n                                                </table>\r\n\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- 数据表单弹窗 -->\r\n        <form method=\"post\" class=\"form-horizontal\" role=\"form\" id=\"updateGoodsForm\">\r\n            <div class=\"modal fade\" id=\"updateModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"updateModalLabel\" aria-hidden=\"true\">\r\n                <div class=\"modal-dialog\" style=\"width: 1400px\">\r\n                    <div class=\"modal-content\">\r\n                        <div class=\"modal-header\">\r\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\r\n                                ×\r\n                            </button>\r\n                            <h4 class=\"modal-title\" id=\"updateModalLabel\">\r\n                                物品清单\r\n                            </h4>\r\n                        </div>\r\n\r\n                        <div class=\"form-group\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-lg-12\">\r\n                                    <div class=\"ibox float-e-margins\">\r\n                                        <div class=\"ibox-content\">\r\n\r\n                                            <div class=\"\">\r\n                                                <button onclick=\"listfnClickAddRow();\" href=\"javascript:void(0);\" class=\"list-top-btn btn btn-primary \">添加物品</button>\r\n                                                <button type=\"button\" id=\"list-batch-edit-btn\" class=\"list-top-btn btn btn-primary \">批量编辑</button>\r\n                                                <button type=\"button\" id=\"list-batch-save-btn\" class=\"list-top-btn btn btn-primary \">批量保存</button>\r\n                                            </div>\r\n\r\n                                            <table id=listTable width=\"100%\" class=\"table table-striped table-bordered table-hover dataTables-example\">\r\n\r\n                                            </table>\r\n\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>  <!--   end modal-body  -->\r\n                </div><!-- /.modal-content -->\r\n            </div><!-- /.modal -->\r\n        </form>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n<!-- Mainly scripts -->\r\n<script src=\"js/jquery-2.1.1.min.js\"></script>\r\n<script src=\"js/bootstrap.min.js?v=3.4.0\"></script>\r\n<script src=\"js/plugins/metisMenu/jquery.metisMenu.js\"></script>\r\n<script src=\"js/plugins/slimscroll/jquery.slimscroll.min.js\"></script>\r\n\r\n<!-- Custom and plugin javascript -->\r\n<script src=\"js/hplus.js?v=2.2.0\"></script>\r\n<script src=\"js/plugins/pace/pace.min.js\"></script>\r\n\r\n<!-- iCheck -->\r\n<script src=\"js/plugins/iCheck/icheck.min.js\"></script>\r\n\r\n<!--&lt;!&ndash;引入JavaScript&ndash;&gt;-->\r\n<script type=\"text/javascript\" language=\"javascript\" src=\"https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js\"></script>\r\n\r\n\r\n<!-- Data Tables -->\r\n<script src=\"js/plugins/dataTables/jquery.dataTables.js\"></script>\r\n<script src=\"js/plugins/dataTables/dataTables.bootstrap.js\"></script>\r\n\r\n<!--&lt;!&ndash;引入css&ndash;&gt;-->\r\n<!--<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css\">-->\r\n\r\n<!--&lt;!&ndash;&lt;!&ndash;引入JavaScript&ndash;&gt;&ndash;&gt;-->\r\n<!--<script type=\"text/javascript\" language=\"javascript\" src=\"//code.jquery.com/jquery-1.12.4.js\"></script>-->\r\n<!--<script type=\"text/javascript\" language=\"javascript\" src=\"https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js\"></script>-->\r\n\r\n\r\n\r\n<!--初始化代码-->\r\n<!-- 导入header -->\r\n<script>\r\n    $(function () {\r\n        $.get(\"header.html\",function (data) {\r\n            $(\"#header\").html(data);\r\n        });\r\n    });\r\n</script>\r\n<script>\r\n    $(function () {\r\n        $.get(\"left_sidebar.html\",function (data) {\r\n            $(\"#left_sidebar\").html(data);\r\n        });\r\n    });\r\n</script>\r\n<script>\r\n    const dataSet = [\r\n        ['', '', '', '采购用途0', '', '0'],\r\n        ['', '', '', '采购用途1', '', '0'],\r\n    ];\r\n    const dataSets = [\r\n        ['aaa1', '规格1', '20', '单位', 'fenlei', '10.0', '2000-12-24', '300', '20', '1hao', 'beizhu1'],\r\n        ['aaa2', '规格', '20', '单位', 'fenlei', '10.0', '2000-12-24', '300', '20', '1hao', 'beizhu2'],\r\n        ['aaa3', '规格1', '20', '单位', 'fenlei', '10.0', '2000-12-24', '300', '20', '1hao', 'beizhu3'],\r\n        ['aaa4', '规格', '20', '单位', 'fenlei', '10.0', '2000-12-24', '300', '20', '1hao', 'beizhu4'],\r\n        ['aaa5', '规格1', '20', '单位', 'fenlei', '10.0', 'xxxx-xx', '300', '20', '1hao', 'beizhu5']\r\n    ];\r\n    $(document).ready(function() {\r\n        $(function(){\r\n            var table = $('#table').DataTable({\r\n                retrieve: true,\r\n                data:dataSet,\r\n                columns:[\r\n                    {\r\n                        'field': \"purchase_requisition_id\",\r\n                        'title': '采购申请表编号',\r\n                        'defaultContent' : \"\"\r\n                    }, {\r\n                        'field': \"purchase_order_id\",\r\n                        'title': '采购物品清单编号',\r\n                        'defaultContent' : \"\"\r\n                    }, {\r\n                        'field': \"requisition_user_id\",\r\n                        'title': '申请人',\r\n                        'defaultContent' : \"\"\r\n                    }, {\r\n                        'field': \"purpose\",\r\n                        'title': '采购用途',\r\n                        'defaultContent' : \"\"\r\n                    }, {\r\n                        'field': \"requisition_date\",\r\n                        'title': '申请提交日期',\r\n                        'defaultContent' : \"\"\r\n                    }, {\r\n                        'field': \"state\",\r\n                        'title': '申请当前状态',\r\n                        'defaultContent' : \"0\"\r\n                    }, {\r\n                        'field': \"approval_user_id\",\r\n                        'title': '审批人',\r\n                        'defaultContent' : \"\"\r\n                    }, {\r\n                        'field': \"approval_opinions\",\r\n                        'title': '审批意见',\r\n                        'defaultContent' : \"\"\r\n                    }, {\r\n                        'field': \"approval_date\",\r\n                        'title': '审批日期',\r\n                        'defaultContent' : \"\"\r\n                    }, {\r\n                        field: \"operate\",\r\n                        sTitle: '操作',\r\n                        sDefaultContent : \"<button class='submit-btn btn btn-primary btn-xs' type='button' >提交</button>\"+\r\n                            \"<button class='edit-btn btn btn-primary btn-xs' type='button' style='margin-left: 10px'>编辑</button>\"  +\r\n                        \"<button class='list-btn btn btn-primary btn-xs' type='button' style='margin-left: 10px'>物品清单</button>\"+\r\n                            \"<button class='delete btn btn-default btn-xs' style='margin-left: 10px'>删除</button>\",\r\n                        sClass: 'text-center',\r\n                        \"data\" : null,\r\n                        // \"render\" : function(data, type,row) {\r\n                        //     var id = '\"' + row.id + '\"';\r\n                        //     var html = \"<a href='javascript:void(0);'  class='btn btn-primary btn-xs'  onclick='EditViewById()'></i>物品清单</a>\"\r\n                        //     return html;\r\n                        //     // formatter: actionFormatter\r\n                        // }\r\n                    }],\r\n                \"language\": {\r\n                    \"sProcessing\": \"处理中...\",\r\n                    \"sLengthMenu\": \"显示 _MENU_ 项结果\",\r\n                    \"sZeroRecords\": \"没有匹配结果\",\r\n                    \"sInfo\": \"显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项\",\r\n                    \"sInfoEmpty\": \"显示第 0 至 0 项结果，共 0 项\",\r\n                    \"sInfoFiltered\": \"(由 _MAX_ 项结果过滤)\",\r\n                    \"sInfoPostFix\": \"\",\r\n                    \"sSearch\": \"搜索:\",\r\n                    \"sUrl\": \"\",\r\n                    \"sEmptyTable\": \"表中数据为空\",\r\n                    \"sLoadingRecords\": \"载入中...\",\r\n                    \"sInfoThousands\": \",\",\r\n                    \"oPaginate\": {\r\n                        \"sFirst\": \"首页\",\r\n                        \"sPrevious\": \"上页\",\r\n                        \"sNext\": \"下页\",\r\n                        \"sLast\": \"末页\"\r\n                    },\r\n                    \"oAria\": {\r\n                        \"sSortAscending\": \": 以升序排列此列\",\r\n                        \"sSortDescending\": \": 以降序排列此列\"\r\n                    }\r\n                }\r\n            });\r\n\r\n            var listtable = $('#listTable').DataTable({\r\n                retrieve: true,\r\n                data:dataSets,\r\n                columns:[\r\n                    {\r\n                        'field': \"name\",\r\n                        'title': '物品名称',\r\n                        'defaultContent' : \"\",\r\n                        'sClass': 'text-center'\r\n                    }, {\r\n                        'field': \"specification\",\r\n                        'title': '规格',\r\n                        'defaultContent' : \"\",\r\n                        'sClass': 'text-center'\r\n                    }, {\r\n                        'field': \"quantity\",\r\n                        'title': '数量',\r\n                        'defaultContent' : \"\",\r\n                        'sClass': 'text-center'\r\n                    }, {\r\n                        'field': \"unit\",\r\n                        'title': '包装单位',\r\n                        'defaultContent' : \"\",\r\n                        'sClass': 'text-center'\r\n                    }, {\r\n                        'field': \"classification\",\r\n                        'title': '分类',\r\n                        'defaultContent' : \"\",\r\n                        'sClass': 'text-center'\r\n                    }, {\r\n                        'field': \"price\",\r\n                        'title': '单价',\r\n                        'defaultContent' : \"\",\r\n                        'sClass': 'text-center'\r\n                    }, {\r\n                        'field': \"expiration_time\",\r\n                        'title': '过期时间',\r\n                        'defaultContent' : \"\",\r\n                        'sClass': 'text-center'\r\n                    }, {\r\n                        'field': \"upper_limit\",\r\n                        'title': '警戒上限',\r\n                        // width:90,\r\n                        'defaultContent' : \"\",\r\n                        'sClass': 'text-center'\r\n                    }, {\r\n                        'field': \"lower_limit\",\r\n                        'title': '警戒下限',\r\n                        // width:90,\r\n                        'defaultContent' : \"\",\r\n                        'sClass': 'text-center'\r\n                    }, {\r\n                        'field': \"warehouse_id\",\r\n                        'title': '仓库',\r\n                        'defaultContent' : \"\",\r\n                        'sClass': 'text-center'\r\n                    }, {\r\n                        'field': \"notes\",\r\n                        'title': '备注',\r\n                        'defaultContent' : \"\",\r\n                        'sClass': 'text-center'\r\n                    }, {\r\n                        field: \"operate\",\r\n                        sTitle: '操作',\r\n                        sDefaultContent : \"<button class='list-edit-btn btn btn-primary btn-xs' type='button'>编辑</button>\" +\r\n                            \"<button class='list-delete btn btn-default btn-xs' style='margin-left: 10px'>删除</button>\",\r\n                        sClass: 'text-center',\r\n                        // width:100,\r\n                        \"data\" : null,\r\n                        // \"render\" : function(data, type,row) {\r\n                        //   var html = \"<a href='javascript:void(0);'  class='edit-btn btn btn-primary btn-xs' type='button'>修改</a>\"\r\n                        //   html += \"<a href='javascript:void(0);'  class='delete btn btn-default btn-xs'>删除</a>\"\r\n                        //   return html;\r\n                        //   // formatter: actionFormatter\r\n                        // }\r\n                    }],\r\n                \"language\": {\r\n                    \"sProcessing\": \"处理中...\",\r\n                    \"sLengthMenu\": \"显示 _MENU_ 项结果\",\r\n                    \"sZeroRecords\": \"没有匹配结果\",\r\n                    \"sInfo\": \"显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项\",\r\n                    \"sInfoEmpty\": \"显示第 0 至 0 项结果，共 0 项\",\r\n                    \"sInfoFiltered\": \"(由 _MAX_ 项结果过滤)\",\r\n                    \"sInfoPostFix\": \"\",\r\n                    \"sSearch\": \"搜索:\",\r\n                    \"sUrl\": \"\",\r\n                    \"sEmptyTable\": \"表中数据为空\",\r\n                    \"sLoadingRecords\": \"载入中...\",\r\n                    \"sInfoThousands\": \",\",\r\n                    \"oPaginate\": {\r\n                        \"sFirst\": \"首页\",\r\n                        \"sPrevious\": \"上页\",\r\n                        \"sNext\": \"下页\",\r\n                        \"sLast\": \"末页\"\r\n                    },\r\n                    \"oAria\": {\r\n                        \"sSortAscending\": \": 以升序排列此列\",\r\n                        \"sSortDescending\": \": 以降序排列此列\"\r\n                    }\r\n                }\r\n            });\r\n\r\n            // 点击 物品清单\r\n            $(\"table tbody\").on(\"click\",\".list-btn\",function (){\r\n                // $('#listTable').dataTable().api().draw();\r\n                // $('#listTable').dataTable().reload();\r\n                var tds=$(this).parents(\"tr\").children();\r\n                var arr = tds[5].innerText;\r\n                console.log(arr);\r\n                if(arr==='已提交'||arr==='审核通过'){\r\n                    $('.list-edit-btn').attr('disabled',true);\r\n                    $('.list-delete').attr('disabled',true);\r\n                    $('.list-top-btn').attr('disabled',true);\r\n                }\r\n                if(arr==='未提交'||arr==='审核未通过'){\r\n                    $('.list-edit-btn').attr('disabled',false);\r\n                    $('.list-delete').attr('disabled',false);\r\n                    $('.list-top-btn').attr('disabled',false);\r\n                }\r\n\r\n                $('#updateModal').modal('show');\r\n            })\r\n\r\n            // 点击 提交 按钮\r\n            $(\"table tbody\").on(\"click\",\".submit-btn\",function (){\r\n                var tds=$(this).parents(\"tr\").children();\r\n                var arr = tds[5].innerText;\r\n                console.log(arr);\r\n                if(arr==='未提交'||arr==='审核未通过'){\r\n                    // 提交的代码\r\n                    if(confirm('确认提交申请？')){  //确认提交\r\n                        // 拼后端BeanUtils所需的map串\r\n                        var front_end_data = \"\";\r\n                        if (tds[0].innerText !== \"\") front_end_data += \"purchase_requisition_id=\"+tds[0].innerText+\"&\";\r\n                        if (tds[1].innerText !== \"\") front_end_data += \"purchase_order_id=\"+tds[1].innerText+\"&\";\r\n                        if (tds[3].innerText !== \"\") front_end_data += \"purpose=\"+tds[3].innerText+\"&\";\r\n                        if (tds[4].innerText !== \"\") front_end_data += \"requisition_date=\"+tds[4].innerText+\"&\";\r\n                        if (tds[5].innerText !== \"\") front_end_data += \"&state=\"+tds[5].innerText+\"&\";\r\n                        if (tds[6].innerText !== \"\") front_end_data += \"&approval_user_id=\"+tds[6].innerText+\"&\";\r\n                        if (tds[7].innerText !== \"\") front_end_data += \"&approval_opinions=\"+tds[7].innerText+\"&\";\r\n                        if (tds[8].innerText !== \"\") front_end_data += \"&approval_date=\"+tds[8].innerText+\"&\";\r\n                        // front_end_data = front_end_data.substring(0, front_end_data.length-1);  //删除最后一个字符\r\n\r\n                        $.get(\"user/findOne\", {}, function (data) {\r\n                            // 获取当前登陆的用户id\r\n                            front_end_data += \"requisition_user_id=\"+data.user_id;\r\n                            console.log(\"front_end_data=\"+front_end_data);\r\n                            // 把前端数据传给后端\r\n                            $.post(\"purchase/createOrUpdateItems\", front_end_data, function (data) {\r\n                                console.log(\"在接受后端数据之后\");\r\n                                if (data.flag) {\r\n                                    alert(\"提交成功\");\r\n                                    tds[5].innerText = '已提交';\r\n                                    // 禁用按钮：应该放入点击确认\r\n                                    $(this).attr('disabled',true);\r\n                                    tds.find('.edit-btn').attr('disabled',true);\r\n                                } else {\r\n                                    alert(\"提交失败\");\r\n                                }\r\n                            })\r\n                        });  // end of $.get(\"user/findOne\"...\r\n                    } // end of confirm(确认提交申请？)\r\n                    else {} //点击取消，无事发生\r\n                }\r\n            })\r\n\r\n            // 申请表修改\r\n            $(\"#table tbody\").on(\"click\",\".edit-btn\",function(){\r\n                var tds=$(this).parents(\"tr\").children();\r\n                $.each(tds, function(i,val){\r\n                    var jqob=$(val);\r\n                    if(i<=2||i>3 ){return true;}//跳过第1项 序号,按钮\r\n                    var txt=jqob.text();\r\n                    var put=$(\"<input type='text' style='width: 80px'>\");\r\n                    put.val(txt);\r\n                    jqob.html(put);\r\n                });\r\n                $(this).html(\"保存\");\r\n                $(this).toggleClass(\"edit-btn\");\r\n                $(this).toggleClass(\"save-btn\");\r\n            });\r\n\r\n            //申请表修改保存\r\n            $(\"#table tbody\").on(\"click\",\".save-btn\",function(){\r\n                var row=table.row($(this).parents(\"tr\"));\r\n                var tds=$(this).parents(\"tr\").children();\r\n                $.each(tds, function(i,val){\r\n                    var jqob=$(val);\r\n                    //把input变为字符串\r\n                    //console.log(!jqob.has('button').length);\r\n                    if(!jqob.has('button').length){\r\n                        var txt=jqob.children(\"input\").val();\r\n                        //console.log(jqob.children(\"input\"));\r\n                        jqob.html(txt);\r\n                        table.cell(jqob).data(txt);//修改DataTables对象的数据\r\n                    }\r\n                });\r\n                $(this).html(\"编辑\");\r\n                $(this).toggleClass(\"edit-btn\");\r\n                $(this).toggleClass(\"save-btn\");\r\n            });\r\n\r\n            // 物品清单修改\r\n            $(\"#listTable tbody\").on(\"click\",\".list-edit-btn\",function(){\r\n                var tds=$(this).parents(\"tr\").children();\r\n                $.each(tds, function(i,val){\r\n                    var jqob=$(val);\r\n                    if(jqob.has('button').length ){return true;}//跳过第1项 序号,按钮\r\n                    var txt=jqob.text();\r\n                    var put=$(\"<input type='text' style='width: 80px'>\");\r\n                    put.val(txt);\r\n                    jqob.html(put);\r\n                });\r\n                $(this).html(\"保存\");\r\n                $(this).toggleClass(\"list-edit-btn\");\r\n                $(this).toggleClass(\"list-save-btn\");\r\n            });\r\n\r\n            //  物品清单修改保存\r\n            $(\"#listTable tbody\").on(\"click\",\".list-save-btn\",function(){\r\n                var row=listtable.row($(this).parents(\"tr\"));\r\n                var tds=$(this).parents(\"tr\").children();\r\n                $.each(tds, function(i,val){\r\n                    var jqob=$(val);\r\n                    //把input变为字符串\r\n                    console.log(!jqob.has('button').length);\r\n                    if(!jqob.has('button').length){\r\n                        var txt=jqob.children(\"input\").val();\r\n                        console.log(jqob.children(\"input\"));\r\n                        jqob.html(txt);\r\n                        listtable.cell(jqob).data(txt);//修改DataTables对象的数据\r\n                    }\r\n                });\r\n                $(this).html(\"编辑\");\r\n                $(this).toggleClass(\"list-edit-btn\");\r\n                $(this).toggleClass(\"list-save-btn\");\r\n            });\r\n\r\n            //批量点击编辑按钮\r\n            $(\"#batch-edit-btn\").click(function(){\r\n                $(\".edit-btn\").click();\r\n            });\r\n            $(\"#batch-save-btn\").click(function(){\r\n                $(\".save-btn\").click();\r\n            });\r\n\r\n            //物品清单批量点击编辑按钮\r\n            $(\"#list-batch-edit-btn\").click(function(){\r\n                $(\".list-edit-btn\").click();\r\n            });\r\n            $(\"#list-batch-save-btn\").click(function(){\r\n                $(\".list-save-btn\").click();\r\n            });\r\n\r\n            // 申请单点击删除按钮，触发删除行脚本\r\n            $(document).on(\"click\",'.delete',function(){\r\n                $('#table').dataTable().fnDeleteRow($(this).closest('tr')[0]);\r\n            });\r\n            // 物品清单点击删除按钮，触发删除行脚本\r\n            $(document).on(\"click\",'.list-delete',function(){\r\n                $('#listTable').dataTable().fnDeleteRow($(this).closest('tr')[0]);\r\n            });\r\n\r\n\r\n            // 根据 申请当前状态，设置按钮是否可用\r\n            $(\"#table tbody tr\").each(function () {\r\n                var a = $(this).children();//获取每一行\r\n                var arr = a[5].innerText;//取得第六列的值\r\n                if(arr==='0'){\r\n                    a[5].innerText = '未提交';\r\n                }else if(arr==='1'){\r\n                    a[5].innerText = '已提交';\r\n                    a.find('.submit-btn').attr('disabled',true);\r\n                    a.find('.edit-btn').attr('disabled',true);\r\n                }else if(arr==='2'){\r\n                    a[5].innerText = '审核通过';\r\n                    a.find('.submit-btn').attr('disabled',true);\r\n                    a.find('.edit-btn').attr('disabled',true);\r\n                }else if(arr==='3'){\r\n                    a[5].innerText = '审核未通过';\r\n                }\r\n            })\r\n        });\r\n\r\n    } );\r\n\r\n\r\n\r\n</script>\r\n\r\n<script>\r\n    function fnClickAddRow() {\r\n        $('#table').dataTable().fnAddData([\r\n            \"\", \"\", \"\", \"\",\r\n            \"\", \"未提交\", \"\", \"\", \"\",\r\n            \"\", \"\"]);}\r\n    function listfnClickAddRow() {\r\n        $('#listTable').dataTable().fnAddData([\r\n            \"\", \"\", \"\", \"\",\r\n            \"\", \"\", \"\", \"\", \"\",\r\n            \"\", \"\"]);}\r\n</script>\r\n\r\n</body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/form_purchase.html b/src/main/webapp/form_purchase.html
--- a/src/main/webapp/form_purchase.html	(revision 31c0b7b559e6e7b053a2a71f3130a129a6495235)
+++ b/src/main/webapp/form_purchase.html	(date 1686185338739)
@@ -138,7 +138,7 @@
 
 <!-- Data Tables -->
 <script src="js/plugins/dataTables/jquery.dataTables.js"></script>
-<script src="js/plugins/dataTables/dataTables.bootstrap.js"></script>
+<script s’‘rc="js/plugins/dataTables/dataTables.bootstrap.js"></script>
 
 <!--&lt;!&ndash;引入css&ndash;&gt;-->
 <!--<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css">-->
@@ -549,6 +549,15 @@
 
 
 
+</script>
+
+<!-- 导入header -->
+<script>
+    $(function () {
+        $.get("header.html",function (data) {
+            $("#header").html(data);
+        });
+    });
 </script>
 
 <script>
